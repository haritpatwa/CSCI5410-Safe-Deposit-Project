(this.webpackJsonplogin=this.webpackJsonplogin||[]).push([[0],{50:function(e,t){},506:function(e,t,r){},507:function(e,t,r){},516:function(e,t,r){"use strict";r.r(t);var a=r(5),n=r.n(a),s=r(78),o=r.n(s),c=(r(87),r.p,r(88),r(9)),l=r.n(c),i=r(14),u=r(2),d=r(4),b=r(6),m=r(7),h=(r(90),r(39)),j=r(18),g=r(1),p=function(e){Object(b.a)(r,e);var t=Object(m.a)(r);function r(e){var a;Object(u.a)(this,r),(a=t.call(this,e)).handleInp=function(e){var t=e.target.id,r=a.state.form;r[t]=e.target.value,a.setState({form:r})},a.login=function(){var e=Object(i.a)(l.a.mark((function e(t){var r,n,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(j.b)(a.db,"UserDetails");case 3:return r=e.sent,e.next=6,a.setState({loading:!0,error:!1});case 6:return e.next=8,Object(j.d)(r);case 8:return n=e.sent,s=n.docs.map((function(e){return e.data()})),o=s.filter((function(e){return e.email==a.state.form.email&&e.password==a.state.form.password})),e.next=13,a.setState({loading:!1});case 13:if(0!=o.length){e.next=17;break}a.setState({error:!0}),e.next=19;break;case 17:return e.next=19,n.docs.map((function(e){e.data().email==o[0].email&&(console.log("email:",o[0].email),localStorage.setItem("email",o[0].email),localStorage.setItem("balance",o[0].balance),localStorage.setItem("q1",o[0].q1),localStorage.setItem("q2",o[0].q2),localStorage.setItem("q3",o[0].q3),localStorage.setItem("q4",o[0].q4),localStorage.setItem("cipher",o[0].cipher),localStorage.setItem("boxNumber",o[0].boxNumber),window.location.href="/questionpage")}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getData=function(){return Object(g.jsxs)(n.a.Fragment,{children:[Object(g.jsxs)("div",{className:"card col-md-5 color",children:[Object(g.jsx)("h3",{children:"Log In"}),Object(g.jsx)("table",{className:"table",children:Object(g.jsxs)("tbody",{children:[Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:"Email"}),Object(g.jsx)("td",{children:":"}),Object(g.jsx)("td",{children:Object(g.jsx)("input",{id:"email",type:"email",className:"form-control",placeholder:"abc@xyz.com",value:a.state.form.email,onChange:a.handleInp})})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:"Password"}),Object(g.jsx)("td",{children:":"}),Object(g.jsx)("td",{children:Object(g.jsx)("input",{id:"password",type:"password",className:"form-control",placeholder:"Enter Password",value:a.state.form.password,onChange:a.handleInp})})]})]})}),a.state.loading?Object(g.jsxs)("button",{className:"btn btn-success",type:"button",disabled:!0,children:[Object(g.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Loading..."]}):Object(g.jsx)("button",{className:"btn btn-success",onClick:a.login,children:"Login"}),Object(g.jsx)("br",{})]}),a.state.error?Object(g.jsx)("div",{class:"alert alert-danger",role:"alert",children:"Invalid credentials"}):""]})},a.state={form:{email:"",password:"",q1:"",q2:"",q3:"",q4:"",cipher:"",boxNumber:""},loading:!1,error:!1};var s=Object(h.a)({apiKey:"AIzaSyBq9kQwzVeAFVE45OB4sRdaChNFO4H7blU",authDomain:"safe-deposit-30066.firebaseapp.com",projectId:"safe-deposit-30066",storageBucket:"safe-deposit-30066.appspot.com",messagingSenderId:"122396467700",appId:"1:122396467700:web:4e20ba9f930b1a857859a1"});return a.db=Object(j.e)(s),a}return Object(d.a)(r,[{key:"render",value:function(){return this.getData()}}]),r}(n.a.Component),f=p,x=(r(92),function(e){Object(b.a)(a,e);var t=Object(m.a)(a);function a(e){var s;Object(u.a)(this,a),(s=t.call(this,e)).handleInp=function(e){var t=e.target.id,r=s.state.form;r[t]=e.target.value,s.setState({form:r,start:!1})},s.register=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,n,o,c,i,u,d,b,m,h,g,p,f,x;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(j.b)(s.db,"Users");case 3:return a=e.sent,e.next=6,Object(j.d)(a);case 6:if(n=e.sent,o=n.docs.map((function(e){return e.data()})),c=r(35),i={region:"us-east-1",accessKeyId:"AKIA4RW42NZLJPIGWUHA",secretAccessKey:"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"},c.config.update(i),u=new c.DynamoDB.DocumentClient,0!=(d=o.filter((function(e){return e.count<3}))).length){e.next=23;break}return m=Math.random().toFixed(16).split(".")[1],e.next=17,Object(j.a)(a,{balance:5e3,count:1,members:[s.state.form.email],pubsub:!1,sentby:"",boxNumber:m});case 17:b=m,h={boxId:m,balance:5e3,count:1,members:[s.state.form.email],pubsub:!1,sentby:""},g={TableName:"User",Item:h},u.put(g,(function(e,t){e?console.log("users::save::error - "+JSON.stringify(e,null,2)):console.log("users::save::success")})),e.next=41;break;case 23:return console.log("Came here"),p="",f="",e.next=28,n.docs.map((function(e){e.data().count<3&&(p=e.ref,f=e.data().boxNumber)}));case 28:return e.next=30,Object(j.c)(p);case 30:return g={TableName:"User",Key:{boxId:f}},u.delete(g,(function(e,t){e?console.log("users::delete::error - "+JSON.stringify(e,null,2)):console.log("users::delete::success")})),d[0].members[d[0].count]=s.state.form.email,d[0].count=d[0].count+1,console.log(d[0]),b=d[0].boxNumber,e.next=38,Object(j.a)(a,d[0]);case 38:h={boxId:d[0].boxNumber,balance:d[0].balance,count:d[0].count,members:d[0].members,pubsub:d[0].pubsub,sentby:d[0].sentby},g={TableName:"User",Item:h},u.put(g,(function(e,t){e?console.log("users::save::error - "+JSON.stringify(e,null,2)):console.log("users::save::success")}));case 41:return e.next=43,Object(j.b)(s.db,"UserDetails");case 43:return x=e.sent,e.next=46,s.setState({loading:!0});case 46:return e.next=48,Object(j.a)(x,{cipher:s.state.form.cipher,email:s.state.form.email,password:s.state.form.password,q1:s.state.form.q1,q2:s.state.form.q2,q3:s.state.form.q3,q4:s.state.form.q4,boxNumber:b});case 48:return e.next=50,s.setState({loading:!1,start:!0});case 50:alert("Registration is done"),window.location.href="/";case 52:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.getData=function(){return Object(g.jsx)(n.a.Fragment,{children:Object(g.jsxs)("div",{className:"card col-md-5 color",children:[Object(g.jsx)("h3",{children:"Sign Up"}),Object(g.jsx)("table",{className:"table",children:Object(g.jsxs)("tbody",{children:[Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:"Email"}),Object(g.jsx)("td",{children:":"}),Object(g.jsx)("td",{children:Object(g.jsx)("input",{id:"email",type:"email",className:"form-control",placeholder:"abc@dal.ca",value:s.state.form.email,onChange:s.handleInp})})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:"Password"}),Object(g.jsx)("td",{children:":"}),Object(g.jsx)("td",{children:Object(g.jsx)("input",{id:"password",type:"password",className:"form-control",placeholder:"Enter Password",value:s.state.form.password,onChange:s.handleInp})})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:"Favourite Colour"}),Object(g.jsx)("td",{children:":"}),Object(g.jsx)("td",{children:Object(g.jsx)("input",{id:"q1",type:"text",className:"form-control",placeholder:"Answer Required*",value:s.state.form.q1,onChange:s.handleInp})})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:"Favourite Movie"}),Object(g.jsx)("td",{children:":"}),Object(g.jsx)("td",{children:Object(g.jsx)("input",{id:"q2",type:"text",className:"form-control",placeholder:"Answer Required*",value:s.state.form.q2,onChange:s.handleInp})})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:"Favourite Number"}),Object(g.jsx)("td",{children:":"}),Object(g.jsx)("td",{children:Object(g.jsx)("input",{id:"q3",type:"text",className:"form-control",placeholder:"Answer Required*",value:s.state.form.q3,onChange:s.handleInp})})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:"Favourite City"}),Object(g.jsx)("td",{children:":"}),Object(g.jsx)("td",{children:Object(g.jsx)("input",{id:"q4",type:"text",className:"form-control",placeholder:"Answer Required*",value:s.state.form.q4,onChange:s.handleInp})})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:'Example "ABC"'}),Object(g.jsx)("td",{children:":"}),Object(g.jsx)("td",{children:'For value as "1": "BCD"'})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:"Cipher Value"}),Object(g.jsx)("td",{children:":"}),Object(g.jsx)("td",{children:Object(g.jsx)("input",{id:"cipher",type:"text",className:"form-control",placeholder:"value Required*",value:s.state.form.cipher,onChange:s.handleInp})})]})]})}),s.state.loading?Object(g.jsxs)("button",{className:"btn btn-success",type:"button",disabled:!0,children:[Object(g.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Loading..."]}):Object(g.jsx)("button",{className:"btn btn-success",onClick:s.register,children:"Register"}),Object(g.jsx)("br",{}),s.state.loading&&!s.state.start?Object(g.jsx)("div",{class:"alert alert-success",role:"alert",children:"Successfully registered !"}):""]})})},s.state={form:{cipher:"",email:"",password:"",q1:"",q2:"",q3:"",q4:"",boxNumber:""},loading:!1,start:!0};var o=Object(h.a)({apiKey:"AIzaSyBq9kQwzVeAFVE45OB4sRdaChNFO4H7blU",authDomain:"safe-deposit-30066.firebaseapp.com",projectId:"safe-deposit-30066",storageBucket:"safe-deposit-30066.appspot.com",messagingSenderId:"122396467700",appId:"1:122396467700:web:4e20ba9f930b1a857859a1"});return s.db=Object(j.e)(o),s}return Object(d.a)(a,[{key:"render",value:function(){return this.getData()}}]),a}(n.a.Component)),O=x,v=r(82),y=r(13),I=(r(506),r(79)),N=r.p+"static/media/bar-graph.bd060ef9.png",q=function(e){Object(b.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this)).logout=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),localStorage.clear(),window.location.href="/";case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.generatereport=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,s,o,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(a=new I.a("landscape","px","a4","false")).setFont("Helvertica","bold"),a.text(300,60,"Log in statistics"),a.setFont("Helvertica","normal"),s=r(35),o={region:"us-east-1",accessKeyId:"AKIA4RW42NZLJPIGWUHA",secretAccessKey:"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"},s.config.update(o),c=new s.DynamoDB.DocumentClient,i={TableName:"loginstatistics",Key:{boxNumber:n.state.boxNumber}},c.get(i,(function(e,t){if(e)console.log("users::fetchOneByKey::error - "+JSON.stringify(e,null,2));else{console.log("users::fetchOneByKey::success - "+JSON.stringify(t,null,2));for(var r=0;r<t.Item.line.length;r++)a.text(60,80+20*r,t.Item.line[r]);var n=localStorage.getItem("boxNumber"),s={TableName:"withdrawaldetails",Key:{email:localStorage.getItem("email")}};a.addPage(),c.get(s,(function(e,t){if(e)console.log("users::fetchOneByKey::error - "+JSON.stringify(e,null,2));else if(console.log("users::fetchOneByKey::success - "+JSON.stringify(t,null,2)),t.Item){var r=new Date;r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds();a.setFont("Helvertica","bold"),a.text(300,60,"Withdrawal Graph"),a.addImage(N,"PNG",65,20,500,400),a.save(n+".pdf")}else a.setFont("Helvertica","bold"),a.text(300,60,"Withdrawal Graph"),a.text(60,80,"Sorry no withdrawal from you side, therefore no graph"),a.save(n+".pdf")}))}}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={email:"",balance:"",q1:"",q2:"",q3:"",q4:"",cipher:"",boxNumber:""},n}return Object(d.a)(a,[{key:"componentWillMount",value:function(){var e=localStorage.getItem("email"),t=localStorage.getItem("balance"),r=localStorage.getItem("q1"),a=localStorage.getItem("q2"),n=localStorage.getItem("q3"),s=localStorage.getItem("q4"),o=localStorage.getItem("cipher"),c=localStorage.getItem("boxNumber");console.log("email retrieve : ",e),console.log("q1 retrieve : ",r),console.log("q2 retrieve : ",a),console.log("q3 retrieve : ",n),console.log("q4 retrieve : ",s),console.log("cipher retrieve : ",o),console.log("boxNumber retrieve : ",c),this.setState({email:e,balance:t,q1:r,q2:a,q3:n,q4:s,cipher:o,boxNumber:c})}},{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{id:"button",children:Object(g.jsx)("button",{className:"btn btn-success",onClick:this.logout,children:" Logout"})}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Sucessful log in"}),Object(g.jsxs)("h1",{children:["Hello user:  ",this.state.email]}),Object(g.jsx)("div",{id:"generatereport",children:Object(g.jsx)("button",{className:"btn btn-success",onClick:this.generatereport,children:" Generate Report"})})]})]})}}]),a}(a.Component),S=q,w=(r(507),function(e){Object(b.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(u.a)(this,a),(s=t.call(this)).handleInp=function(e){var t=e.target.id,r=s.state.form;r[t]=e.target.value,s.setState({form:r})},s.login=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,n,o,c,i,u,d,b,m,h,j,g;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,s.setState({loading:!1});case 3:a=localStorage.getItem("q1"),n=localStorage.getItem("q2"),o=localStorage.getItem("q3"),c=localStorage.getItem("q4"),i=localStorage.getItem("cipher"),u=[a,n,o,c],console.log("question: ",u),console.log("cipher: ",i),console.log("answer: ",s.state.form.ans),console.log("leftshit first: ",s.CaesarCipher(s.state.form.cipherQuestion,parseInt(i))),console.log("leftshit second: ",s.state.form.cipherAns),s.CaesarCipher(s.state.form.cipherQuestion,parseInt(i)),u[s.state.form.randomNumber]==s.state.form.ans&&s.CaesarCipher(s.state.form.cipherQuestion,parseInt(i))==s.state.form.cipherAns?(d=r(35),b={region:"us-east-1",accessKeyId:"AKIA4RW42NZLJPIGWUHA",secretAccessKey:"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"},d.config.update(b),m=new d.DynamoDB.DocumentClient,h=localStorage.getItem("boxNumber"),console.log(h),j=localStorage.getItem("email"),g={TableName:"loginstatistics",Key:{boxNumber:h}},m.get(g,(function(e,t){if(e)console.log("users::fetchOneByKey::error - "+JSON.stringify(e,null,2));else{console.log("users::fetchOneByKey::success - "+JSON.stringify(t,null,2));var r=new Date,a=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()+" "+(r.getHours()+":"+r.getMinutes()+":"+r.getSeconds());if(console.log(t),t.Item)var n={boxNumber:h,line:t.Item.line.concat(["Logged user: "+j+" at: "+a])};else n={boxNumber:h,line:["Logged user: "+j+" at: "+a]};var s={TableName:"loginstatistics",Item:n};m.put(s,(function(e,t){e?console.log("users::save::error - "+JSON.stringify(e,null,2)):(console.log("users::save::success"),window.location="https://frontend-l2m7wjsa5q-uc.a.run.app/home/user1")}))}}))):s.setState({error:!0});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.getData=function(){return Object(g.jsxs)(n.a.Fragment,{children:[Object(g.jsxs)("div",{className:"card col-md-5 color",children:[Object(g.jsx)("h3",{children:"2-way authentication"}),Object(g.jsx)("table",{className:"table",children:Object(g.jsxs)("tbody",{children:[Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:s.state.form.random[s.state.form.randomNumber]}),Object(g.jsx)("td",{children:":"}),Object(g.jsx)("td",{children:Object(g.jsx)("input",{id:"ans",type:"text",className:"form-control",placeholder:"Answer Required*",value:s.state.form.ans,onChange:s.handleInp})})]}),Object(g.jsxs)("tr",{children:[Object(g.jsxs)("td",{children:["Cipher of '",s.state.form.cipherQuestion,"'"]}),Object(g.jsx)("td",{children:":"}),Object(g.jsx)("td",{children:Object(g.jsx)("input",{id:"cipherAns",type:"text",className:"form-control",placeholder:"Answer Required*",value:s.state.form.cipherAns,onChange:s.handleInp})})]})]})}),s.state.loading?Object(g.jsxs)("button",{className:"btn btn-success",type:"button",disabled:!0,children:[Object(g.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Loading..."]}):Object(g.jsx)("button",{className:"btn btn-success",onClick:s.login,children:"Login"}),Object(g.jsx)("br",{})]}),s.state.error?Object(g.jsx)("div",{class:"alert alert-danger",role:"alert",children:"Invalid credentials"}):""]})},s.state={form:{email:"",q1:"",q2:"",q3:"",q4:"",cipher:"",random:["Favourite Colour","Favourite Movie","Favourite Number","Favourite City"],randomNumber:s.randomIntFromInterval(0,3),boxNumber:"",cipherQuestion:s.getRandomString(3),ans:"",cipherAns:""},loading:!1,error:!1},s}return Object(d.a)(a,[{key:"componentWillMount",value:function(){var e=localStorage.getItem("email"),t=localStorage.getItem("q1"),r=localStorage.getItem("q2"),a=localStorage.getItem("q3"),n=localStorage.getItem("q4"),s=localStorage.getItem("cipher"),o=localStorage.getItem("boxNumber");console.log("email retrieve : ",e),console.log("q1 retrieve : ",t),console.log("q2 retrieve : ",r),console.log("q3 retrieve : ",a),console.log("q4 retrieve : ",n),console.log("cipher retrieve : ",s),console.log("boxNumber retrieve : ",o),this.setState({email:e,q1:t,q2:r,q3:a,q4:n,cipher:s,boxNumber:o})}},{key:"randomIntFromInterval",value:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},{key:"leftShifting",value:function(e,t){return e.substring(t)+e.substring(0,t)}},{key:"CaesarCipher",value:function(e,t){for(var a="",n=0,s=0;s<e.length;s++)n=e[s].charCodeAt()+t,a+=String.fromCharCode(n);var o=r(35);o.config.update({region:"us-east-1",accessKeyId:"AKIA4RW42NZLJPIGWUHA",secretAccessKey:"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"});var c={TableName:"forcipher",Key:{cipher:"forcipher"},UpdateExpression:"set ciphervalue = :byUser, valueofcipher = :byuser2, countofcipher = :byuser3",ExpressionAttributeValues:{":byUser":a,":byuser2":e,":byuser3":t},ReturnValues:"UPDATED_NEW"};return(new o.DynamoDB.DocumentClient).update(c,(function(e,t){e?console.log("users::update::error - "+JSON.stringify(e,null,2)):console.log("users::update::success "+JSON.stringify(t))})),a}},{key:"getRandomString",value:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r="",a=0;a<e;a++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}},{key:"render",value:function(){return this.getData()}}]),a}(a.Component)),C=w;var A=function(){return Object(g.jsx)(v.a,{children:Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(y.a,{path:"/",exact:!0,component:f}),Object(g.jsx)(y.a,{path:"/registration",exact:!0,component:O}),Object(g.jsx)(y.a,{path:"/questionpage",exact:!0,component:C}),Object(g.jsx)(y.a,{path:"/dashboard",exact:!0,component:S})]})})},D=function(e){e&&e instanceof Function&&r.e(6).then(r.bind(null,660)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,o=t.getTTFB;r(e),a(e),n(e),s(e),o(e)}))};r(515);o.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(A,{})}),document.getElementById("root")),D()},87:function(e,t,r){},88:function(e,t,r){},90:function(e,t,r){},92:function(e,t,r){}},[[516,1,2]]]);
//# sourceMappingURL=main.eea49254.chunk.js.map